
<div class="general-block-decorator">
  <div class="row">

    <div class="col-md-12 title title-without-tabs">
      {intl d='instagram.ai' l='Edit your Instagram configuration.'}
    </div>

    <div class="form-container">
      <div class="col-md-12"> 
	    <p>{intl d='instagram.ai' l='## How to retrieve my Access Token ##' urloauth={url path="/module/Instagram/access"}}</p>
		  <hr>
	    <p>{intl d='instagram.ai' l='## How to refresh my Access Token ##' urlrefresh={url path="/module/instagram/token/refresh"}}</p>
        {form name="instagram.config"}
        {if $form_error_message}<div class="alert alert-danger">{$form_error_message}</div>{/if}

          <form method="POST" id="instagram-form" action="{url path="/admin/module/Instagram/save"}" {form_enctype form=$form} class="clearfix">

            {form_hidden_fields form=$form}

            {form_field form=$form field='access_token'}
            <div class="form-group{if $error} has-error{/if}">
              <label class="control-label" for="{$label_attr.for}">
              {$label}
                {form_error form=$form field="access_token"}
                      <br />
                      <span class="error">{$message}</span>
                {/form_error}
              </label>
              <span class="label-help-block">{$label_attr.help}</span>
              <input id="instagram_config-id-access_token" class="form-control " type="text" aria-required="true" value="{$value}" name="{$name}">
            </div>
            {/form_field}
{*
            {form_field form=$form field='username'}
              <div class="form-group{if $error} has-error{/if}">
                <label class="control-label" for="{$label_attr.for}">
                  {$label}
	                  <span class="required">*</span>
	                  {form_error form=$form field="username"}
                      <br />
                      <span class="error">{$message}</span>
                  {/form_error}
                </label>
                <span class="label-help-block">{$label_attr.help}</span>
                <input id="instagram_config-id-username" class="form-control " type="text" required="" aria-required="true" value="{$value}" name="{$name}">
              </div>
            {/form_field}
*}
            {form_field form=$form field='client_id'}
              <div class="form-group{if $error} has-error{/if}">
                <label class="control-label" for="{$label_attr.for}">
                  {$label}
	                  <span class="required">*</span>
	                  {form_error form=$form field="client_id"}
                      <br />
                      <span class="error">{$message}</span>
                  {/form_error}
                </label>
                <span class="label-help-block">{$label_attr.help}</span>
                <input id="instagram_config-id-username" class="form-control " type="text" required="" aria-required="true" value="{$value}" name="{$name}">
              </div>
            {/form_field}
            {form_field form=$form field='client_secret'}
              <div class="form-group{if $error} has-error{/if}">
                <label class="control-label" for="{$label_attr.for}">
                  {$label}
	                  <span class="required">*</span>
	                  {form_error form=$form field="client_secret"}
                      <br />
                      <span class="error">{$message}</span>
                  {/form_error}
                </label>
                <span class="label-help-block">{$label_attr.help}</span>
                <input id="instagram_config-id-username" class="form-control " type="text" required="" aria-required="true" value="{$value}" name="{$name}">
              </div>
            {/form_field}
            {*
            {form_field form=$form field='photos_quantity'}
              <div class="form-group{if $error} has-error{/if}">
                <label class="control-label" for="{$label_attr.for}">
                  	{$label}
	                <span class="required">*</span>
                  {form_error form=$form field="photos_quantity"}
                      <br />
                      <span class="error">{$message}</span>
                  {/form_error}
                </label>
                <span class="label-help-block">{$label_attr.help}</span>
                <input id="instagram_config-id-photos_quantity" class="form-control " type="text" required="" aria-required="true" value="{$value}" name="{$name}">
              </div>
            {/form_field}
            
			{form_field form=$form field='debug_mode'}
            <div class="checkbox">
                <label for="{$label_attr.for}">
                    <input type="checkbox" name="{$name}" id="{$label_attr.for}" value="yes"{$attr}{if {config key="instagram_debug_mode"} == $value} checked="checked"{/if}/> {$label}
                </label>
                <span class="label-help-block">{$label_attr.help}</span>
            </div>
            {/form_field}
*}
            <button type="submit" id="instagram-save" name="instagram_save" value="save" class="form-submit-button btn btn-sm btn-default" title="{intl d='instagram.ai' l='Save'}">{intl d='instagram.ai' l='Save'}</button>
			  
			  
		{if {config key="instagram_client_id"}}
		<a href="https://api.instagram.com/oauth/authorize?client_id={config key="instagram_client_id"}&redirect_uri={url path="/module/Instagram/access"}&scope=user_profile,user_media&response_type=code" class="btn btn-primary right pull-right float-right">Générer un nouveau token d'accès</a>
		 {/if}
			  
          </form>
        {/form}
      </div>
		{if {config key="instagram_token_expire"}}<p class="right pull-right float-right mr-4" style="margin-right: 20px;">date de validité du token {config key="instagram_token_expire"}</p>{/if}
		{loop type="instagram" name="instagram2" limit=1 debug=1 width="578" height="578" resize_mode="crop"}
<div class="col-md-12" style="margin-top:20px;">
<pre>
{$RETOUR nofilter}
</pre></div>
		{/loop}
    </div>

  </div>
</div>